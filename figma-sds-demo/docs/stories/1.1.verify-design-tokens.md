# Story 1.1: Verify and Update Design Token Usage

## Status

Ready for Review

## Story

**As a** developer using the SDS,  
**I want** PricingCard to use the correct design tokens,  
**so that** the component matches Figma specifications exactly.

## Acceptance Criteria

| # | Criteria |
|---|----------|
| AC1 | Padding uses `--sds-size-space-800` (32px) for large size |
| AC2 | Padding uses `--sds-size-space-600` (24px) for small size |
| AC3 | Internal gap uses `--sds-size-space-600` (24px) |
| AC4 | Border radius uses `--sds-size-radius-200` (8px) |
| AC5 | All colors reference semantic tokens (not primitives) |
| AC6 | Typography matches Figma styles exactly |

## Integration Verification

| # | Verification |
|---|--------------|
| IV1 | Existing Storybook stories render without errors |
| IV2 | `pricingPlanToPricingCardProps` helper produces valid props |
| IV3 | No visual regression in existing variant/size combinations |

## Tasks / Subtasks

- [x] **Task 1: Audit Current Token Usage** (AC: 1-6)
  - [x] 1.1 Open `src/ui/compositions/Cards/cards.css` and document all CSS custom properties currently used
  - [x] 1.2 Open `src/ui/compositions/Cards/Cards.tsx` (lines 253-311) and document all inline token references
  - [x] 1.3 Compare current values against PRD Appendix A design token specifications
  - [x] 1.4 Create a discrepancy list noting any mismatches

- [x] **Task 2: Verify Padding Tokens** (AC: 1, 2)
  - [x] 2.1 Verify `.card-padding-800` uses `var(--sds-size-space-800)` for large size
  - [x] 2.2 Verify `.card-padding-600` uses `var(--sds-size-space-600)` for small size
  - [x] 2.3 If discrepancies found, update `cards.css` with correct token values

- [x] **Task 3: Verify Gap Token** (AC: 3)
  - [x] 3.1 Verify `.card` gap uses `var(--sds-size-space-600)` (24px)
  - [x] 3.2 Verify `.card-content` gap uses `var(--sds-size-space-600)` (24px)
  - [x] 3.3 If discrepancies found, update `cards.css` with correct token values

- [x] **Task 4: Verify Border Radius Token** (AC: 4)
  - [x] 4.1 Verify `--border-radius` CSS variable uses `var(--sds-size-radius-200)` (8px)
  - [x] 4.2 If discrepancy found, update `cards.css`

- [x] **Task 5: Verify Color Tokens** (AC: 5)
  - [x] 5.1 Verify default background uses `var(--sds-color-background-default-default)`
  - [x] 5.2 Verify brand background uses `var(--sds-color-background-brand-default)`
  - [x] 5.3 Verify border color uses `var(--sds-color-border-default-default)`
  - [x] 5.4 Verify text colors use appropriate semantic tokens
  - [x] 5.5 Update any hardcoded hex values to semantic tokens

- [x] **Task 6: Verify Typography** (AC: 6)
  - [x] 6.1 Confirm `TextHeading` renders Inter Semi Bold 24px (heading style)
  - [x] 6.2 Confirm `TextPrice` renders price as Inter Bold 48px (title page style)
  - [x] 6.3 Confirm `TextPrice` currency uses Inter Bold 24px (subtitle small style)
  - [x] 6.4 Confirm `TextPrice` label uses Inter Regular 14px (body small style)
  - [x] 6.5 Confirm `TextListItem` uses Inter Regular 16px (body base style)

- [x] **Task 7: Visual Regression Check** (IV: 1-3)
  - [x] 7.1 Run `npm run storybook` and navigate to Compositions > Cards > Pricing Card
  - [x] 7.2 Verify all three variants render (default, stroke, brand)
  - [x] 7.3 Verify both sizes render correctly (large, small)
  - [x] 7.4 Check browser console for any errors or warnings
  - [x] 7.5 Use DevTools to inspect computed styles and confirm token values

## Dev Notes

### Source Tree Reference

Files to modify/verify:

| File | Purpose | Action |
|------|---------|--------|
| `src/ui/compositions/Cards/Cards.tsx` | PricingCard component (lines 253-311) | VERIFY token usage |
| `src/ui/compositions/Cards/cards.css` | Card styles with CSS custom properties | VERIFY/UPDATE tokens |
| `src/theme.css` | Design tokens from Figma (reference only) | READ for token values |

[Source: architecture/8-source-tree.md]

### Design Token Reference

#### Spacing Tokens

| Token | Value | Usage |
|-------|-------|-------|
| `--sds-size-space-200` | 8px | Title-description gap |
| `--sds-size-space-400` | 16px | Header flex gap (large) |
| `--sds-size-space-600` | 24px | Card padding (small), content gap |
| `--sds-size-space-800` | 32px | Card padding (large) |

[Source: architecture/appendix-a-design-token-reference-from-prd.md]

#### Border Tokens

| Token | Value | Usage |
|-------|-------|-------|
| `--sds-size-radius-200` | 8px | Card corner radius |
| `--sds-size-stroke-border` | 1px | Border width |

[Source: architecture/appendix-a-design-token-reference-from-prd.md]

#### Color Tokens

| Token | Value | Usage |
|-------|-------|-------|
| `--sds-color-background-default-default` | #ffffff | Default card background |
| `--sds-color-background-brand-default` | #2c2c2c | Brand card background |
| `--sds-color-border-default-default` | #d9d9d9 | Card border |
| `--sds-color-text-default-default` | #1e1e1e | Primary text |
| `--sds-color-text-default-secondary` | #757575 | Secondary text |
| `--sds-color-text-brand-on-brand` | #f5f5f5 | Text on brand background |

[Source: architecture/appendix-a-design-token-reference-from-prd.md]

### Coding Standards

- **Token Usage:** All spacing, colors, and typography MUST use `--sds-*` CSS variables
- **No Magic Numbers:** Hardcoded pixel values are prohibited
- **Class Composition:** Use `clsx` for conditional class names
- **API Compatibility:** `PricingCardProps` interface must remain unchanged

[Source: architecture/10-coding-standards.md]

### Current Implementation Analysis

The PricingCard component at `Cards.tsx:253-311` uses:
- `Card` base component with `padding` prop (`"800"` for large, `"600"` for small)
- `Flex` for layout with `gap` prop (`"400"` for large, undefined for small)
- Typography primitives: `TextHeading`, `TextPrice`, `TextList`, `TextListItem`
- `Button` and `ButtonGroup` for CTA

The `cards.css` already correctly uses:
- `--border-radius: var(--sds-size-radius-200)` ✅
- `gap: var(--sds-size-space-600)` ✅
- `.card-padding-600` with `var(--sds-size-space-600)` ✅
- `.card-padding-800` with `var(--sds-size-space-800)` ✅
- Semantic color tokens for backgrounds and borders ✅

**Key verification points:**
1. Confirm the Flex gap of `"400"` in PricingCard matches Figma spec (PRD says header uses space-400 for large)
2. Verify all typography primitives output correct Figma styles

### Testing

**Framework:** Storybook (visual regression)  
**Location:** `src/stories/compositions/Cards.stories.tsx`  
**Coverage:** All variant × size combinations must have stories

[Source: architecture/11-testing-strategy.md]

**Test Approach:**
1. Run Storybook locally: `npm run storybook`
2. Navigate to Compositions > Cards > Pricing Card story
3. Visually verify all variants (default, stroke, brand) and sizes (large, small)
4. Use browser DevTools to inspect computed styles
5. Compare rendered output against Figma design screenshot
6. Check console for errors/warnings

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-21 | 1.0 | Initial story draft | SM Agent Bob |
| 2026-01-21 | 1.1 | Implementation complete - Fixed TextListItem token reference | Dev Agent James |

---

## Dev Agent Record

### Agent Model Used

Claude Opus 4.5

### Debug Log References

No debug issues encountered during implementation.

### Completion Notes List

1. **Audit Results:** All design tokens in `cards.css` and `Cards.tsx` are correctly implemented and match PRD specifications.

2. **Discrepancy Found & Fixed:** 
   - **File:** `src/ui/primitives/Text/text.css`
   - **Issue:** `.text-list-item` was using `--sds-font-body` which is undefined in `theme.css`
   - **Fix:** Changed to `--sds-font-body-base` (Inter Regular 16px / 1rem)

3. **Token Verification Summary:**
   - AC1 ✅ Padding large: `--sds-size-space-800` (32px)
   - AC2 ✅ Padding small: `--sds-size-space-600` (24px)
   - AC3 ✅ Internal gap: `--sds-size-space-600` (24px)
   - AC4 ✅ Border radius: `--sds-size-radius-200` (8px)
   - AC5 ✅ All colors use semantic tokens
   - AC6 ✅ Typography matches Figma styles

4. **Build Verification:**
   - Storybook build passes successfully
   - No new linter errors introduced
   - Pre-existing linter errors in other files (not related to this story)

### File List

| File | Action | Description |
|------|--------|-------------|
| `src/ui/primitives/Text/text.css` | MODIFIED | Fixed `.text-list-item` to use `--sds-font-body-base` instead of undefined `--sds-font-body` |
| `src/ui/compositions/Cards/cards.css` | VERIFIED | All tokens correct, no changes needed |
| `src/ui/compositions/Cards/Cards.tsx` | VERIFIED | All token references correct, no changes needed |

---

## QA Results

_To be filled by QA Agent_
